{"version":3,"sources":["services/persons.js","components/Filter.js","components/AddPerson.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","showFilter","setShowFilter","value","onChange","e","target","AddPerson","newName","setNewName","newNumber","setNewNumber","persons","setPersons","createPerson","update","handleUpdate","person","window","confirm","name","number","onSubmit","event","preventDefault","foundPerson","find","p","undefined","includes","concat","type","Persons","handleDelete","filter","toLowerCase","map","key","onClick","Notification","message","className","App","useState","setMessage","useEffect","personService","initialPersons","returnedPerson","setTimeout","console","log","catch","error","parseInt","r","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b31350e6.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl =  'https://puhelinluettelo-osa3.herokuapp.com/api/persons' //'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n  \nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteById = (id) => \n    axios.delete(`${baseUrl}/${id}`)\n\n\nexport default { getAll, create, update, deleteById }","import React from 'react'\n\nconst Filter = ({ showFilter, setShowFilter}) => {\n    const handleFilterChange = e => setShowFilter(e.target.value)\n\n    return(\n        <>\n        <div>\n          filter: <input value={showFilter} onChange={handleFilterChange}/>\n        </div>\n        </>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst AddPerson = ({ newName, setNewName, newNumber, setNewNumber, persons, setPersons,\n     createPerson, update }) => {\n    const handleNameChange = event => \n        setNewName(event.target.value)\n\n    const handleNumberChange = e =>\n        setNewNumber(e.target.value)\n\n    const addPerson = event => {\n        event.preventDefault()\n        let foundPerson = persons.find(p => p.name === newName)\n        const newObject = {\n            name: newName,\n            number: newNumber === '' ? \"No number\": newNumber\n        }\n\n        foundPerson !== undefined && foundPerson.name.includes(newName) ?\n        handleUpdate(foundPerson, newNumber):\n        setPersons(persons.concat(newObject)) || createPerson(newObject)\n\n        setNewName('')\n        setNewNumber('')\n    }\n\n    const handleUpdate = (person, newNumber) => {\n        if(window.confirm(`${person.name} is allready in phonebook. Do you want to update this number?`))\n            update({...person, number: newNumber})\n    }\n  \n    return(\n        <>\n        <h2>Add new</h2>\n        <form onSubmit={addPerson}>\n            <div>\n            name: <input value={newName} onChange={handleNameChange}/>\n            </div>\n            <div>\n            number: <input value={newNumber} onChange={handleNumberChange}/>\n            </div>\n            <div>\n            <button type=\"submit\">add</button>\n            </div>\n        </form>\n        </>\n    )\n}\n\nexport default AddPerson","import React from 'react'\n\nconst Persons = ({ persons, showFilter, handleDelete }) => {\n\n    const showPersons = () => {\n        let list = persons.filter(p => p.name.toLowerCase().includes(showFilter.toLowerCase()))\n        \n        return list.map(p => \n            <p key={p.name}>\n                {p.name} - {p.number} <button value={p.id} onClick={handleDelete}>delete</button>\n            </p>\n        )\n    }\n\n    return(\n        <>\n        <h2>Numbers</h2>\n        {showPersons()}\n        </>\n    )\n}\n\nexport default Persons","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className={message.type}>\n        {message.message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter.js'\nimport AddPerson from './components/AddPerson.js'\nimport Persons from './components/Persons.js'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ showFilter, setShowFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const createPerson = newObject => {\n    personService\n        .create(newObject)\n        .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            setMessage({\n              type: 'success',\n              message: `Succesfully added '${returnedPerson.name}' to server`\n            })\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n        })\n  }\n\n  \n  const update = (newObject) => {\n    console.log(newObject)\n    personService\n    .update(newObject.id, newObject)\n    .then(returnedPerson => {\n      //console.log(returnedP) => undefined\n      setPersons(persons.map(person => person.id !== newObject.id ? person : newObject))\n      setMessage({\n        type: 'success',\n        message: `Succesfully updated ${newObject.name}'s number.`\n      })\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }).catch(error => {\n      setMessage({\n        type: 'error',\n        message: `Person '${newObject.name}' was already removed from server`\n      })\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      setPersons(persons.filter(p => p.id !== newObject.id))\n    })\n  }\n\n  const handleDelete = e => {\n    let id = parseInt(e.target.value)\n    let foundPerson = persons.find(p => p.id === id)\n\n    personService\n    .deleteById(id)\n    .then(r => {\n      setMessage({\n        type: 'success',\n        message: `Succesfully removed '${foundPerson.name}' from server`\n      })\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    })\n    setPersons(persons.filter(p => p.id !== id))\n}\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter showFilter={showFilter} setShowFilter={setShowFilter}/>\n      <AddPerson newName={newName} setNewName={setNewName}\n       newNumber={newNumber} setNewNumber={setNewNumber} persons={persons}\n      setPersons={setPersons} createPerson={createPerson} update={update}/>\n      <Persons persons={persons} showFilter={showFilter} handleDelete={handleDelete}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}